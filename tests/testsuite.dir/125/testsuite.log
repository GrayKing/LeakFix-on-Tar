#                             -*- compilation -*-
125. owner.at:21: testing --owner and --group ...
./owner.at:24:
mkdir gnu
(cd gnu
TEST_TAR_FORMAT=gnu
export TEST_TAR_FORMAT
TAR_OPTIONS="-H gnu"
export TAR_OPTIONS
rm -rf *

export TZ=UTC0

genfile --file a

tar --owner="Joe the Plumber:1234" \
    --group="Plumber's Union:5678" \
    --mtime='@0' \
    --mode='u=rw,go=r' \
    -cf arc a

tar -tvf arc
tar --numeric-owner -tvf arc
)
--- /dev/null	2015-11-23 14:28:24.110557770 +0800
+++ /root/Desktop/tar-1.28/tests/testsuite.dir/at-groups/125/stderr	2015-11-24 15:39:26.138163989 +0800
@@ -0,0 +1,7 @@
+/root/Desktop/tar-1.28/tests/testsuite.dir/at-groups/125/test-source: line 48: genfile: command not found
+tar: Joe the Plumber\:1234: Invalid owner
+tar: Error is not recoverable: exiting now
+tar: arc: Cannot open: No such file or directory
+tar: Error is not recoverable: exiting now
+tar: arc: Cannot open: No such file or directory
+tar: Error is not recoverable: exiting now
--- -	2015-11-24 15:39:26.148925747 +0800
+++ /root/Desktop/tar-1.28/tests/testsuite.dir/at-groups/125/stdout	2015-11-24 15:39:26.142163988 +0800
@@ -1,3 +1 @@
--rw-r--r-- Joe the Plumber/Plumber's Union 0 1970-01-01 00:00 a
--rw-r--r-- 1234/5678         0 1970-01-01 00:00 a
 
./owner.at:24: exit code was 2, expected 0
125. owner.at:21: 125. --owner and --group (owner.at:21): expected failure (owner.at:24)
